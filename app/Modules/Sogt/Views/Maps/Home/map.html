<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Mapa GPS con Línea de Tiempo</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .timeline-controls {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .timeline-slider {
            width: 100%;
            margin: 10px 0;
        }

        .timeline-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .info-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px;
        }

        .info-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 14px;
            font-weight: 600;
            color: #495057;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-timeline {
            min-width: 45px;
        }

        .gm-style-iw {
            max-width: 300px !important;
        }

        .gm-style-iw-c {
            max-width: 300px !important;
        }

        .info-window-content {
            font-size: 14px;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <!-- Mapa -->
    <div class="mb-3" id="map-container">
        <div id="map" style="height: 500px; width: 100%; border-radius: 8px;"></div>
    </div>

    <!-- Controles de Línea de Tiempo -->
    <div class="row mb-3">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0"><i class="fas fa-clock"></i> Línea de Tiempo - Recorrido GPS</h6>
                </div>
                <div class="card-body">
                    <div class="timeline-controls">
                        <!-- Controles de reproducción -->
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            <button class="btn btn-success btn-timeline me-2" id="playBtn">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="btn btn-warning btn-timeline me-2" disabled id="pauseBtn">
                                <i class="fas fa-pause"></i>
                            </button>
                            <button class="btn btn-danger btn-timeline me-3" disabled id="stopBtn">
                                <i class="fas fa-stop"></i>
                            </button>

                            <!-- Control de velocidad -->
                            <div class="speed-control">
                                <label class="form-label mb-0" for="speedControl">Velocidad:</label>
                                <select class="form-select form-select-sm" id="speedControl" style="width: 80px;">
                                    <option value="0.5">0.5x</option>
                                    <option selected value="1">1x</option>
                                    <option value="2">2x</option>
                                    <option value="5">5x</option>
                                    <option value="10">10x</option>
                                </select>
                            </div>
                        </div>

                        <!-- Slider de progreso -->
                        <input class="timeline-slider" id="timelineSlider" max="100" min="0" type="range" value="0">

                        <!-- Información en tiempo real -->
                        <div class="timeline-info">
                            <div class="info-card">
                                <div class="info-label">Punto Actual</div>
                                <div class="info-value" id="currentPoint">-- / --</div>
                            </div>
                            <div class="info-card">
                                <div class="info-label">Dispositivo</div>
                                <div class="info-value" id="currentDevice">--</div>
                            </div>
                            <div class="info-card">
                                <div class="info-label">Velocidad</div>
                                <div class="info-value" id="currentSpeed">-- km/h</div>
                            </div>
                            <div class="info-card">
                                <div class="info-label">Altitud</div>
                                <div class="info-value" id="currentAltitude">-- m</div>
                            </div>
                            <div class="info-card">
                                <div class="info-label">Tiempo</div>
                                <div class="info-value" id="currentTime">--:--:--</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Controles del Mapa -->
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0"><i class="fas fa-cogs"></i> Controles del Mapa</h6>
                </div>
                <div class="card-body">
                    <div class="btn-group me-2" role="group">
                        <button class="btn btn-outline-primary" onclick="changeMapType('roadmap')" type="button">
                            <i class="fas fa-road"></i> Carretera
                        </button>
                        <button class="btn btn-outline-primary" onclick="changeMapType('satellite')" type="button">
                            <i class="fas fa-satellite"></i> Satélite
                        </button>
                        <button class="btn btn-outline-primary" onclick="changeMapType('hybrid')" type="button">
                            <i class="fas fa-layer-group"></i> Híbrido
                        </button>
                        <button class="btn btn-outline-primary" onclick="changeMapType('terrain')" type="button">
                            <i class="fas fa-mountain"></i> Terreno
                        </button>
                    </div>
                    <div class="btn-group" role="group">
                        <button class="btn btn-success" onclick="getCurrentLocation()" type="button">
                            <i class="fas fa-crosshairs"></i> Mi Ubicación
                        </button>
                        <button class="btn btn-info" onclick="clearMarkers()" type="button">
                            <i class="fas fa-eraser"></i> Limpiar Marcadores
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Búsqueda de ubicaciones -->
    <div class="row mt-3">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h6 class="mb-0"><i class="fas fa-search"></i> Búsqueda de Ubicaciones</h6>
                </div>
                <div class="card-body">
                    <div class="input-group">
                        <input class="form-control" id="searchInput" placeholder="Buscar dirección o lugar..."
                               type="text">
                        <button class="btn btn-primary" id="searchBtn" type="button">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <label class="form-label" for="latitude">Latitud:</label>
                            <input class="form-control" id="latitude" readonly type="text">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label" for="longitude">Longitud:</label>
                            <input class="form-control" id="longitude" readonly type="text">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="map.js"></script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAx1vnDnmIX9oZahYHt6oOB7xTadAQAslg&callback=initMap&libraries=geometry,places">
</script>
</body>
</html>
